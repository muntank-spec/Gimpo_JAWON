<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4facfe">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon.png">
    
    <title>ê¹€í¬ì‹œ ìì›í™”ì„¼í„°</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');

        body {
            margin: 0; padding: 0; overflow: hidden;
            background: linear-gradient(180deg, #4facfe 0%, #00f2fe 100%);
            font-family: 'Jua', sans-serif;
            user-select: none; -webkit-user-select: none;
            color: #333; touch-action: none;
        }

        /* ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ */
        #background-shapes { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; overflow: hidden; }
        .bg-icon { position: absolute; font-size: 50px; opacity: 0.25; animation: float 15s infinite linear; color: rgba(255, 255, 255, 0.8); }
        @keyframes float { 0% { transform: translateY(110vh) rotate(0deg); } 100% { transform: translateY(-10vh) rotate(360deg); } }

        .page {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none; flex-direction: column; 
            align-items: center; justify-content: center; text-align: center;
            z-index: 100; overflow-y: auto; -webkit-overflow-scrolling: touch;
            box-sizing: border-box;
        }
        
        #main-menu { display: flex; padding-top: 20px; box-sizing: border-box; } 

        .main-logo { 
            font-size: 10vw; margin-bottom: 20px; color: #1e3799; 
            text-shadow: 2px 2px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff, 4px 4px 5px rgba(0,0,0,0.2);
            z-index: 10; letter-spacing: 2px; font-weight: 900; word-break: keep-all; line-height: 1.2;
        }
        #logoCanvas { margin-bottom: 10px; margin-top: 20px; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2)); }

        .theme-song-bubble {
            position: absolute;
            top: -15px;
            right: -30px;
            background: #ff4757;
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            cursor: pointer;
            animation: bounce-bubble 1.5s infinite;
            border: 2px solid white;
            z-index: 20;
            white-space: nowrap;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        .theme-song-bubble::after {
            content: ''; position: absolute; bottom: -6px; left: 20px;
            border-width: 6px 6px 0; border-style: solid; border-color: #ff4757 transparent transparent transparent; display: block; width: 0;
        }
        @keyframes bounce-bubble {
            0%, 100% { transform: translateY(0) rotate(3deg); }
            50% { transform: translateY(-8px) rotate(-3deg); }
        }

        .white-panel {
            background: rgba(255, 255, 255, 0.95); border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15); color: #2c3e50; padding: 25px; 
            margin-top: 20px; text-align: left; border: 3px solid #fff; width: 85%; max-width: 600px;
        }

        .btn {
            border: none; padding: 15px 0; width: 85%; max-width: 400px;
            font-size: 24px; font-family: 'Jua', sans-serif; border-radius: 50px; cursor: pointer; margin: 10px 0;
            transition: all 0.1s; color: white; box-shadow: 0 5px 0 rgba(0,0,0,0.2); position: relative; overflow: hidden;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3); pointer-events: auto; touch-action: manipulation;
        }
        .btn:active { transform: translateY(4px); box-shadow: none; }

        .btn-home { background: #ff9f43; position: absolute; top: 55px; right: 15px; z-index: 300; font-size: 18px; padding: 8px 20px; border: 2px solid white; width: auto; }
        .btn-bgm { background: rgba(0,0,0,0.2); position: absolute; top: 55px; left: 15px; z-index: 300; font-size: 14px; padding: 8px 15px; border: 1px solid white; color: white; border-radius: 20px; cursor: pointer; width: auto; margin: 0; }

        .btn-exit-game {
            position: absolute; top: 55px; left: 15px; z-index: 300;
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            color: white; border: 2px solid #fff; border-radius: 20px;
            padding: 8px 16px; font-size: 14px; font-family: 'Jua', sans-serif;
            cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3); transition: transform 0.1s;
        }
        .btn-exit-game:active { transform: scale(0.92); }

        .btn-hint {
            position: absolute; bottom: 20px; right: 20px; z-index: 300;
            background: rgba(255, 235, 59, 0.8); border: 2px solid #fbc02d;
            border-radius: 50%; width: 50px; height: 50px; font-size: 24px;
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            display: none; 
        }

        .btn-game { background: linear-gradient(to bottom, #2ecc71, #27ae60); font-size: 32px; padding: 20px 0; }
        .btn-info { background: linear-gradient(to bottom, #3498db, #2980b9); }
        .btn-promo { background: linear-gradient(to bottom, #9b59b6, #8e44ad); }
        
        .btn-select-sort { background: white; color: #333; border: 3px solid #2ecc71; padding: 15px 20px; display:flex; align-items:center; justify-content: space-between; text-shadow: none; margin: 8px 0;}
        .btn-select-pipe { background: white; color: #333; border: 3px solid #e74c3c; padding: 15px 20px; display:flex; align-items:center; justify-content: space-between; text-shadow: none; margin: 8px 0;}
        .btn-select-shooter { background: white; color: #333; border: 3px solid #9b59b6; padding: 15px 20px; display:flex; align-items:center; justify-content: space-between; text-shadow: none; margin: 8px 0;}
        .btn-select-sichuan { background: white; color: #333; border: 3px solid #f39c12; padding: 15px 20px; display:flex; align-items:center; justify-content: space-between; text-shadow: none; margin: 8px 0;}

        .top-counter {
            background: rgba(255, 255, 255, 0.9); padding: 8px 20px; border-radius: 30px;
            color: #1e3799; font-size: 16px; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin-bottom: 10px; display: inline-block;
        }

        .content-box { font-size: 18px; line-height: 1.6; }
        .content-title { font-size: 32px; color: #1e3799; margin-bottom: 15px; font-weight: bold; text-shadow: 2px 2px 0px #fff; }
        
        #gameCanvas { display: block; position: absolute; top: 0; left: 0; z-index: 50; touch-action: none; }
        
        #game-ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.85); z-index: 150;
            display: none; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white; 
        }
        
        #score-board { 
            position: absolute; top: 55px; right: 15px; left: auto; transform: none;
            color: white; font-size: 14px; font-weight: bold; z-index: 60; 
            background: rgba(0,0,0,0.6); padding: 8px 15px; border-radius: 20px; border: 2px solid white; white-space: nowrap;
        }
        
        #rank-board { width: 100%; max-width: 400px; max-height: 200px; overflow-y: auto; margin: 10px 0; color: #2c3e50; }
        .rank-item { display: flex; justify-content: space-between; border-bottom: 1px solid #ddd; padding: 10px 0; font-size: 18px; }
        .rank-item:nth-child(1) { color: #e74c3c; font-weight: bold; } 
        
        .blink { animation: blinker 1.5s linear infinite; color: #fff; font-size: 24px; cursor: pointer; border: 3px solid #fff; padding: 15px 40px; border-radius: 50px; background: #e74c3c; box-shadow: 0 5px 15px rgba(0,0,0,0.3); margin-top: 15px;}
        @keyframes blinker { 50% { opacity: 0.8; transform: scale(0.98); } }

        /* ê°€ë¡œ ëª¨ë“œ ì°¨ë‹¨ */
        #orientation-warning {
            display: none;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #2c3e50; z-index: 99999;
            flex-direction: column; justify-content: center; align-items: center;
            color: white; text-align: center;
        }

        @media only screen and (orientation: landscape) {
            #orientation-warning { display: flex !important; }
            .page, #gameCanvas, #background-shapes, #game-ui-layer { display: none !important; }
        }

        /* --- ì¹´íˆ° ê³µì • íë¦„ë„ìš© ìŠ¤íƒ€ì¼ --- */
        .process-step {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 15px;
            margin: 5px 0;
            width: 85%;
            max-width: 320px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            text-align: center;
            cursor: pointer;
            transition: transform 0.1s;
            border: 3px solid #fff;
        }
        .process-step:active { transform: scale(0.98); }
        .step-icon { font-size: 45px; margin-bottom: 5px; }
        .step-title { font-size: 20px; font-weight: bold; color: #2c3e50; letter-spacing: -0.5px;}
        
        /* ë§í’ì„  CSS */
        .speech-bubble {
            display: none;
            position: relative;
            background: #f8f9fa;
            color: #2c3e50;
            padding: 15px;
            border-radius: 15px;
            font-size: 15px;
            margin-top: 15px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
            text-align: left;
            line-height: 1.4;
            border: 2px solid #bdc3c7; 
            word-break: keep-all;
        }
        .speech-bubble::before {
            content: ""; position: absolute; bottom: 100%; left: 50%; margin-left: -10px;
            border-width: 10px; border-style: solid; border-color: transparent transparent #bdc3c7 transparent;
        }
        .speech-bubble::after {
            content: ""; position: absolute; bottom: 100%; left: 50%; margin-left: -7px;
            border-width: 7px; border-style: solid; border-color: transparent transparent #f8f9fa transparent;
        }
        .process-step.active .speech-bubble { display: block; animation: popDown 0.2s ease-out; }
        @keyframes popDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        
        .step-arrow { font-size: 24px; color: #fff; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); margin: 3px 0; }
    </style>
</head>
<body>

    <div id="orientation-warning">
        <div style="font-size: 80px; margin-bottom: 20px;">ğŸ“²ğŸš«</div>
        <h2 style="margin: 0; font-size: 28px;">í•¸ë“œí°ì„ ì„¸ë¡œë¡œ<br>ëŒë ¤ì£¼ì„¸ìš”!</h2>
        <p style="font-size: 16px; color: #bdc3c7; margin-top: 15px;">ì´ ê²Œì„ì€ ì„¸ë¡œ ëª¨ë“œ ì „ìš©ì…ë‹ˆë‹¤.</p>
    </div>

    <div id="background-shapes"></div>

    <div id="main-menu" class="page">
        <button id="bgm-toggle" class="btn-bgm" onclick="Sound.toggleBGM()">ğŸ”‡ ì‚¬ìš´ë“œ: OFF</button>
        <button class="btn-home" style="opacity:0; pointer-events:none;">.</button>
        
        <div style="height: 80px;"></div>
        <div class="top-counter">ğŸŒ± í™˜ê²½ì— ë‹¤ê°€ê°„ íšŸìˆ˜: <span id="mainUserCount">0</span>íšŒ</div>
        
        <canvas id="logoCanvas" width="200" height="160"></canvas>
        
        <div style="position: relative;">
            <h1 class="main-logo" style="margin-bottom: 20px;">ê¹€í¬ì‹œ<br>ìì›í™”ì„¼í„°</h1>
            <div class="theme-song-bubble" onclick="Sound.click(); window.open('https://youtube.com/shorts/F0coCr8baLE?si=Uw08HIWJy2EaY-od', '_blank')">
                ğŸµ ì£¼ì œê°€
            </div>
        </div>
        
        <button class="btn btn-info" onclick="Sound.click(); goPage('notice')">ğŸ“¢ ì´ìš© ì•ˆë‚´ì‚¬í•­</button>
        <button class="btn btn-promo" onclick="Sound.click(); goPage('promo')">ğŸ¢ ì‹œì„¤ í™ë³´</button>
        <div style="height: 10px;"></div>
        <button class="btn btn-game" onclick="Sound.click(); goPage('game-select')">ğŸ® ê²Œì„ ì‹œì‘í•˜ê¸°</button>
        
        <div style="margin-top: 30px; font-size: 14px; color: rgba(0,0,0,0.5);">
             <span style="text-decoration: underline; cursor: pointer;" onclick="resetData()">[ê´€ë¦¬ì ë°ì´í„° ì´ˆê¸°í™”]</span>
        </div>
    </div>

    <div id="game-select-page" class="page" style="justify-content: flex-start; padding-top: 110px;">
        <button class="btn btn-home" onclick="Sound.click(); goHome()">ğŸ  í™ˆ</button>
        <div class="content-title">ğŸ® ê²Œì„ì„ ì„ íƒí•˜ì„¸ìš”</div>
        <button class="btn btn-select-sort" onclick="Sound.click(); selectGame('sorting')">
            <div style="text-align:left;">
                <div style="font-size:22px; color:#27ae60;">â™»ï¸ <b>ë¶„ë¦¬ë°°ì¶œ ë§ˆìŠ¤í„°</b></div>
                <div style="font-size:13px; font-weight:normal; color:#555; margin-top:3px;">ì“°ë ˆê¸°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë‹´ìœ¼ì„¸ìš”!</div>
            </div>
            <div style="font-size:24px;">ğŸ‘‰</div>
        </button>
        <button class="btn btn-select-pipe" onclick="Sound.click(); selectGame('pipe')">
            <div style="text-align:left;">
                <div style="font-size:22px; color:#c0392b;">â™¨ï¸ <b>ì˜¨ìˆ˜ ê³µê¸‰ ëŒ€ì‘ì „</b></div>
                <div style="font-size:13px; font-weight:normal; color:#555; margin-top:3px;">ìœ„ì—ì„œ ì•„ë˜ë¡œ ë°°ê´€ ì—°ê²°!</div>
            </div>
            <div style="font-size:24px;">ğŸ‘‰</div>
        </button>
        <button class="btn btn-select-shooter" onclick="Sound.click(); selectGame('shooter')">
            <div style="text-align:left;">
                <div style="font-size:22px; color:#9b59b6;">ğŸš€ <b>ì˜¤ì—¼ë¬¼ì§ˆ ì œë¡œ ë¯¸ì…˜</b></div>
                <div style="font-size:13px; font-weight:normal; color:#555; margin-top:3px;">ë ˆì´ì €ì™€ ìœ ë„íƒ„ìœ¼ë¡œ ì†Œíƒ•!</div>
            </div>
            <div style="font-size:24px;">ğŸ‘‰</div>
        </button>
        <button class="btn btn-select-sichuan" onclick="Sound.click(); selectGame('sichuan')">
            <div style="text-align:left;">
                <div style="font-size:22px; color:#f39c12;">ğŸ§© <b>ì—ì½” ì •í™” ë§í¬</b></div>
                <div style="font-size:13px; font-weight:normal; color:#555; margin-top:3px;">ì˜¤ì—¼ë¬¼ì§ˆê³¼ ì •í™”ì•½í’ˆì„ ì—°ê²°!</div>
            </div>
            <div style="font-size:24px;">ğŸ‘‰</div>
        </button>
        <div style="height: 50px;"></div>
    </div>

    <div id="notice-page" class="page" style="justify-content: flex-start; padding-top: 110px;">
        <button class="btn btn-home" onclick="Sound.click(); goHome()">ğŸ  í™ˆ</button>
        <div class="content-title">ğŸ“¢ ì´ìš© ì•ˆë‚´ì‚¬í•­</div>
        <div id="notice-content" class="content-box white-panel"></div>
        <div style="height: 50px;"></div>
    </div>

    <div id="promo-page" class="page" style="justify-content: flex-start; padding-top: 110px;">
        <button class="btn btn-home" onclick="Sound.click(); goHome()">ğŸ  í™ˆ</button>
        <div class="content-title">ğŸ¢ ê¹¨ë—í•œ ê¹€í¬, ë§‘ì€ ì—ë„ˆì§€</div>
        <div id="promo-content" class="content-box white-panel"></div>
        <div style="height: 50px;"></div>
    </div>

    <div id="process-page" class="page" style="justify-content: flex-start; padding-top: 140px;">
        <button class="btn btn-home" onclick="Sound.click(); goPage('promo')">ğŸ”™ ë’¤ë¡œ</button>
        
        <div class="content-title" style="margin-bottom:15px; margin-top: 15px;">ğŸ­ ì†Œê° ì‹œì„¤ ì„¸ë¶€ ê³µì •</div>
        <div style="font-size:15px; color:#fff; text-shadow: 1px 1px 2px rgba(0,0,0,0.4); margin-bottom:25px;">(ê° ë‹¨ê³„ë¥¼ í„°ì¹˜í•˜ë©´ ì„¤ëª…ì´ ë¿…! ë‚˜ì˜µë‹ˆë‹¤)</div>
        
        <div class="process-flow-container" style="width:100%; display:flex; flex-direction:column; align-items:center; padding-bottom: 100px;">
            <div class="process-step" style="border-color: #8e44ad;" onclick="toggleBubble(this, '#8e44ad')">
                <div class="step-icon">ğŸššğŸ—ï¸</div>
                <div class="step-title">1. ë°˜ì… ë° ì €ì¥ì„¤ë¹„</div>
                <div class="speech-bubble">ì“°ë ˆê¸°ë¥¼ ë°˜ì…ì¥ ë²™ì»¤ì— ëª¨ìœ¼ê³ , ê±°ëŒ€í•œ í¬ë ˆì¸ìœ¼ë¡œ ì˜ ì„ì–´ì„œ í˜¸í¼ë¡œ ì™ ë„£ì–´ìš”!</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #e74c3c;" onclick="toggleBubble(this, '#e74c3c')">
                <div class="step-icon">ğŸ”¥ğŸŒªï¸</div>
                <div class="step-title">2. ê°€ìŠ¤í™” ë° ìš©ìœµ (1200â„ƒ)</div>
                <div class="speech-bubble">1200â„ƒ ì´ìƒì˜ ì´ˆê³ ì˜¨ìœ¼ë¡œ ì“°ë ˆê¸°ë¥¼ ì™„ë²½í•˜ê²Œ íƒœìš°ê³  ë…¹ì—¬ ì•ˆì „í•œ ìŠ¬ë˜ê·¸ë¡œ ë§Œë“­ë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #e67e22;" onclick="toggleBubble(this, '#e67e22')">
                <div class="step-icon">â™¨ï¸ğŸŠ</div>
                <div class="step-title">3. íì—´ë³´ì¼ëŸ¬ (ì—ë„ˆì§€ íšŒìˆ˜)</div>
                <div class="speech-bubble">ì—°ì†Œê°€ìŠ¤ë¥¼ ëƒ‰ê°í•˜ë©° ì¦ê¸°ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì´ ì¦ê¸°ë¡œ ìŠ¤í¬ì¸ ì„¼í„° ìˆ˜ì˜ì¥ì— ì˜¨ìˆ˜ë¥¼ ê³µê¸‰í•©ë‹ˆë‹¤!</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #2ecc71;" onclick="toggleBubble(this, '#2ecc71')">
                <div class="step-icon">ğŸ§ªğŸ’¦</div>
                <div class="step-title">4. ë°˜ê±´ì‹ ë°˜ì‘íƒ‘</div>
                <div class="speech-bubble">ì†Œì„íšŒ ìŠ¬ëŸ¬ë¦¬ë¥¼ ë¿œì–´ ì—°ì†Œê°€ìŠ¤ ì† ë‚˜ìœ ì‚°ì„± ê°€ìŠ¤ë¥¼ ì¤‘í™”ì‹œí‚¤ëŠ” 1ì°¨ ì •í™” êµ¬ì—­ì…ë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #34495e;" onclick="toggleBubble(this, '#34495e')">
                <div class="step-icon">ğŸ˜·ğŸ§½</div>
                <div class="step-title">5. ì—¬ê³¼ì§‘ì§„ê¸°</div>
                <div class="speech-bubble">ë¯¸ì„¸ í•„í„°ì™€ í™œì„±íƒ„ì„ ì´ìš©í•´ ë¯¸ì„¸ë¨¼ì§€ì™€ ë‹¤ì´ì˜¥ì‹ ì„ ê¼¼ê¼¼í•˜ê²Œ ê±¸ëŸ¬ëƒ…ë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #2980b9;" onclick="toggleBubble(this, '#2980b9')">
                <div class="step-icon">â™»ï¸âœ¨</div>
                <div class="step-title">6. ì„ íƒì  ì´‰ë§¤í™˜ì›íƒ‘ (SCR)</div>
                <div class="speech-bubble">íŠ¹ìˆ˜ ì´‰ë§¤ë¥¼ í†µí•´ ì˜¨ì‹¤ê°€ìŠ¤ì˜ ì›ì¸ì¸ ì§ˆì†Œì‚°í™”ë¬¼ì„ ë¬¼ê³¼ ì§ˆì†Œë¡œ ì™„ë²½ ë¶„í•´í•©ë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #00cec9;" onclick="toggleBubble(this, '#00cec9')">
                <div class="step-icon">ğŸ­â˜ï¸</div>
                <div class="step-title">7. ìœ ì¸ì†¡í’ê¸° & êµ´ëš</div>
                <div class="speech-bubble">ì² ì €íˆ ì •í™”ëœ ê¹¨ë—í•œ ê³µê¸°ë§Œì„ ê°•ë ¥í•œ ì†¡í’ê¸°ë¡œ ë°€ì–´ë‚´ì–´ ìˆ˜ì¦ê¸°ë¡œ ë‚´ë³´ëƒ…ë‹ˆë‹¤.</div>
            </div>
        </div>
    </div>

    <div id="feed-process-page" class="page" style="justify-content: flex-start; padding-top: 140px;">
        <button class="btn btn-home" onclick="Sound.click(); goPage('promo')">ğŸ”™ ë’¤ë¡œ</button>
        
        <div class="content-title" style="margin-bottom:15px; margin-top: 15px;">ğŸ± ì‚¬ë£Œí™” ì‹œì„¤ ì„¸ë¶€ ê³µì •</div>
        <div style="font-size:15px; color:#fff; text-shadow: 1px 1px 2px rgba(0,0,0,0.4); margin-bottom:25px;">(ê° ë‹¨ê³„ë¥¼ í„°ì¹˜í•˜ë©´ ì„¤ëª…ì´ ë¿…! ë‚˜ì˜µë‹ˆë‹¤)</div>
        
        <div class="process-flow-container" style="width:100%; display:flex; flex-direction:column; align-items:center; padding-bottom: 100px;">
            <div class="process-step" style="border-color: #f39c12;" onclick="toggleBubble(this, '#f39c12')">
                <div class="step-icon">ğŸššğŸ“¥</div>
                <div class="step-title">1. ë°˜ì…ì„¤ë¹„</div>
                <div class="speech-bubble">ê¹€í¬í•œê°•ì‹ ë„ì‹œ í¬ë¦°ë„·ê³¼ ì°¨ëŸ‰ìœ¼ë¡œ ìˆ˜ê±°ëœ ìŒì‹ë¬¼ ì“°ë ˆê¸°ë¥¼ íˆ¬ì… í˜¸í¼ì— ëª¨ìœ¼ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #27ae60;" onclick="toggleBubble(this, '#27ae60')">
                <div class="step-icon">âš™ï¸âœ‚ï¸</div>
                <div class="step-title">2. ì „ì²˜ë¦¬ì„¤ë¹„ (ì„ ë³„/íŒŒì‡„)</div>
                <div class="speech-bubble">ì„ ë³„íŒŒì‡„ê¸°ë¥¼ í†µí•´ ì»¤ë‹¤ë€ ì´ë¬¼ì§ˆì„ ê³¨ë¼ë‚´ê³  ìŒì‹ë¬¼ì„ ì˜ê²Œ ë¶€ìˆœ ë’¤, ì‹¸ì´í´ë¡ ìœ¼ë¡œ í˜‘ì¡ë¬¼ì„ ì œê±°í•©ë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #e67e22;" onclick="toggleBubble(this, '#e67e22')">
                <div class="step-icon">ğŸ”¥ğŸŒ¡ï¸</div>
                <div class="step-title">3. ê±´ì‹ ì‚¬ë£Œí™” ì„¤ë¹„ (ê±´ì¡°)</div>
                <div class="speech-bubble">ê±´ì¡°ê¸°ì—ì„œ ê³ ì˜¨ìœ¼ë¡œ ìˆ˜ë¶„ì„ ì œê±°í•˜ì—¬ ë¯¸ìƒë¬¼ì„ ì‚¬ë©¸ì‹œí‚¤ê³  ì‚¬ë£Œì˜ ê¸°ì´ˆ í˜•íƒœë¥¼ ë§Œë“­ë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #7f8c8d;" onclick="toggleBubble(this, '#7f8c8d')">
                <div class="step-icon">ğŸ§²ğŸ”</div>
                <div class="step-title">4. ì´ë¬¼ì§ˆ ë°˜ì¶œ ì„¤ë¹„</div>
                <div class="speech-bubble">ìë ¥ì„ ë³„ê¸°ì™€ ì§„ë™ìŠ¤í¬ë¦°ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ë£Œ ì†ì— ì„ì¸ ê¸ˆì† ë¬¼ì§ˆì´ë‚˜ ì‘ì€ ì´ë¬¼ì§ˆì„ ì™„ë²½í•˜ê²Œ ê±¸ëŸ¬ëƒ…ë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #c0392b;" onclick="toggleBubble(this, '#c0392b')">
                <div class="step-icon">ğŸ§¬ğŸ“¦</div>
                <div class="step-title">5. ì‚¬ë£Œ ì €ì¥ ë° í¬ì¥</div>
                <div class="speech-bubble">ì œí’ˆì €ì¥ì¡°ì—ì„œ ìƒì‚°ëœ ì‚¬ë£Œë¥¼ í†¤ë°±ìœ¼ë¡œ í¬ì¥í•©ë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #2980b9;" onclick="toggleBubble(this, '#2980b9')">
                <div class="step-icon">ğŸ“¤ğŸšš</div>
                <div class="step-title">6. ê±´ì¡°ì‚¬ë£Œ ë°˜ì¶œ</div>
                <div class="speech-bubble">ì™„ì„±ëœ ì‚¬ë£Œë¥¼ í˜¸ì´ìŠ¤íŠ¸ë¡œ ìš´ë°˜í•˜ì—¬ ì œí’ˆ ë°˜ì¶œ ì°¨ëŸ‰ì— ì‹¤ì–´ ìì›ìœ¼ë¡œ ì¬íƒ„ìƒì‹œí‚µë‹ˆë‹¤.</div>
            </div>
            <div class="step-arrow">â¬‡ï¸</div>
            <div class="process-step" style="border-color: #1abc9c;" onclick="toggleBubble(this, '#1abc9c')">
                <div class="step-icon">ğŸ§¼ğŸŒ¬ï¸</div>
                <div class="step-title">7. íƒˆì·¨ ì„¤ë¹„</div>
                <div class="speech-bubble">ê³µì • ì¤‘ ë°œìƒí•˜ëŠ” ëƒ„ìƒˆë¥¼ ì•½ì•¡ì„¸ì •íƒ‘ê³¼ ë°”ì´ì˜¤í•„í„°ë¥¼ í†µí•´ ì •í™”í•˜ë©°, ì¶”ê°€ ì„¤ì¹˜í•œ íƒˆì·¨ë¡œì—ì„œ ì•…ì·¨ë¥¼ ì—°ì†Œí•˜ì—¬ ë°œìƒí•œ ì—´ì€ ì‚¬ë£Œ ìƒì‚°í• ë•Œ í™œìš©ë©ë‹ˆë‹¤.</div>
            </div>
        </div>
    </div>

    <div id="game-play-page" class="page" style="display:none; overflow: hidden;">
        <button id="ingame-home-btn" class="btn-exit-game" style="display:none;" onclick="forceQuitGame()">ğŸšª ë‚˜ê°€ê¸°</button>
        <div id="score-board"></div>
        <canvas id="gameCanvas"></canvas>
        <div id="hint-btn" class="btn-hint" onclick="Sound.click(); showHint()">ğŸ’¡</div>
        <div id="game-ui-layer">
            <h1 id="gameTitle" style="font-size: 40px; margin-bottom: 20px; color:#fff; text-shadow: 3px 3px 0 #000;">ê²Œì„ ì œëª©</h1>
            <div id="gameGuide" class="white-panel" style="width: 80%; text-align:center; font-size:20px;">ê°€ì´ë“œ ë‚´ìš©</div>
            <div id="rankArea" class="white-panel" style="display:none; width:90%; max-width:500px; flex-direction:column; align-items:center; padding:15px;">
                <div style="font-size:26px; color:#e67e22; font-weight:bold; margin-bottom:5px;">ğŸ† ëª…ì˜ˆì˜ ì „ë‹¹ ğŸ†</div>
                <div id="rank-board" style="width:100%;"></div>
                <div id="eco-quote" style="margin-top:10px; font-size:16px; color:#27ae60; background:#e8f8f5; padding:10px; border-radius:10px; line-height:1.4;"></div>
            </div>
            <div id="start-btn-area"><div class="blink" onclick="Sound.click(); startGame()">í„°ì¹˜í•˜ì—¬ ì‹œì‘</div></div>
            <div id="gameover-btn-area" style="display:none; margin-top:15px;">
                <button class="btn btn-restart" onclick="Sound.click(); startGame()">ğŸ”„ ë‹¤ì‹œ í•˜ê¸°</button>
                <button class="btn btn-quit" onclick="Sound.click(); goPage('game-select')">ğŸ”™ ê²Œì„ ì„ íƒ</button>
                <button class="btn btn-quit" onclick="Sound.click(); goHome()">ğŸ  í™ˆìœ¼ë¡œ</button>
            </div>
        </div>
    </div>

<script>
    // =========================================================================
    // ğŸ’¡ [í…ìŠ¤íŠ¸ ì„¤ì •] ì•ˆë‚´ì‚¬í•­, í™ë³´ë‚´ìš©, ëœë¤ ë¬¸êµ¬ë¥¼ ì—¬ê¸°ì„œ ì†ì‰½ê²Œ ìˆ˜ì •í•˜ì„¸ìš”!
    // =========================================================================
    const CONFIG = {
        noticeText: `
            <p>âœ… <b style="color:#27ae60;">ë°˜ì… ê°€ëŠ¥ íê¸°ë¬¼ (ì†Œê°ìš©):</b><br>ì¢…ëŸ‰ì œ ë´‰íˆ¬ì— ë‹´ê¸´ ê°€ì—°ì„± ì“°ë ˆê¸°, í—Œì˜·, ì‹ ë°œ, ê°€ë°© ë“± íƒ€ëŠ” ì“°ë ˆê¸°.</p><br>
            <p>âŒ <b style="color:#c0392b;">ë°˜ì… ë¶ˆê°€ íê¸°ë¬¼:</b><br>ìŒì‹ë¬¼ë¥˜, ì¬í™œìš©í’ˆ(ìº”, ë³‘, í”Œë¼ìŠ¤í‹±), ë¶ˆì—°ì„±(ë„ìê¸°, ìœ ë¦¬), í­ë°œì„± ìœ„í—˜ë¬¼.</p>
            <br><hr style="border: 1px dashed #ccc; margin: 10px 0;"><br>
            <p style="font-size: 16px; line-height: 1.8;">ğŸ“ <b style="color:#2c3e50;">ë¬¸ì˜ì²˜ ì•ˆë‚´:</b><br>
            <span style="font-size:14px; color:#7f8c8d;">(ë²ˆí˜¸ë¥¼ í„°ì¹˜í•˜ë©´ ë°”ë¡œ í†µí™”ê°€ ì—°ê²°ë©ë‹ˆë‹¤)</span><br><br>
            - <b>íê¸°ë¬¼ í—ˆê°€/ë°°ì¶œ:</b> ê¹€í¬ì‹œì²­ ìì›ìˆœí™˜ê³¼<br>
              ğŸ‘‰ <a href="tel:031-980-2761" style="color:#2980b9; font-weight:bold; text-decoration:none; background:#ecf0f1; padding:4px 10px; border-radius:8px; display:inline-block; margin-top:5px; margin-bottom:10px;">â˜ 031-980-2761</a><br>
            - <b>í¬ë¦°ë„· í‚¤ êµ¬ì…:</b> ë¸Œë‹ˆì—˜ë„¤ì´ì²˜<br>
              ğŸ‘‰ <a href="tel:032-566-0010" style="color:#2980b9; font-weight:bold; text-decoration:none; background:#ecf0f1; padding:4px 10px; border-radius:8px; display:inline-block; margin-top:5px;">â˜ 032-566-0010</a></p>
        `,
        promoText: `
            <p>ğŸŒ± <b style="color:#27ae60;">ì¹œí™˜ê²½ ì†Œê° ê¸°ìˆ :</b><br>ìµœì²¨ë‹¨ ì˜¤ì—¼ ë°©ì§€ ì‹œì„¤ì„ í†µí•´ ë‹¤ì´ì˜¥ì‹  ë“± ìœ í•´ ë¬¼ì§ˆì„ ì™„ë²½í•˜ê²Œ ì œê±°í•©ë‹ˆë‹¤.</p><br>
            <p>âš¡ <b style="color:#f39c12;">íê¸°ë¬¼ì„ ì—ë„ˆì§€ë¡œ:</b><br>ì“°ë ˆê¸°ë¥¼ íƒœìš¸ ë•Œ ë°œìƒí•˜ëŠ” ì—´ì„ ì´ìš©í•˜ì—¬ ìŠ¤í¬ì¸ ì„¼í„°ì— ì˜¨ìˆ˜ì™€ ëƒ‰ë‚œë°©ì„ í•˜ê³  ë‚¨ì€ ì—´ì€ ì§€ì—­ ë‚œë°©ì— ê³µê¸‰í•©ë‹ˆë‹¤.</p><br>
            <p>ğŸ± <b style="color:#e67e22;">ìŒì‹ë¬¼ ìì›í™”:</b><br>ìˆ˜ê±°ëœ ìŒì‹ë¬¼ ì“°ë ˆê¸°ë¥¼ ì¹œí™˜ê²½ ê³µë²•ìœ¼ë¡œ ê±´ì¡°í•˜ì—¬ ì•ˆì „í•œ ì‚¬ë£Œì™€ ë¹„ë£Œë¡œ ì¬ìƒì‚°í•©ë‹ˆë‹¤.</p>
            
            <div style="text-align:center; margin-top:25px;">
                <button class="btn btn-promo" style="font-size:18px; padding:12px; width:100%; margin-bottom:10px; box-shadow:0 4px 10px rgba(0,0,0,0.2);" onclick="Sound.click(); goPage('process')">
                    ğŸ”¥ ì†Œê° ì‹œì„¤ ê³µì •íë¦„ë„ ë³´ê¸°
                </button>
                <button class="btn btn-promo" style="font-size:18px; padding:12px; width:100%; background:linear-gradient(to bottom, #f39c12, #e67e22); box-shadow:0 4px 10px rgba(0,0,0,0.2);" onclick="Sound.click(); goPage('feed-process')">
                    ğŸ± ì‚¬ë£Œí™” ì‹œì„¤ ê³µì •íë¦„ë„ ë³´ê¸°
                </button>
            </div>
        `,
        ecoQuotes: [
            "ğŸŒ± í™˜ê²½ë³´í˜¸ëŠ” ë‚˜ ìì‹ ë¶€í„°",
            "ğŸ­ ìì›í™”ì„¼í„°ëŠ” ê¹¨ë—í•œ ê¹€í¬ë¥¼ ìœ„í•´ í•­ìƒ ë…¸ë ¥í•©ë‹ˆë‹¤",
            "â™»ï¸ ì˜¬ë°”ë¥¸ ë¶„ë¦¬ìˆ˜ê±°ëŠ” ë¯¸ë˜ë¥¼ ìœ„í•œ ì²« ë…¸ë ¥",
            "ğŸ’§ ì•„ê»´ ì“´ ìì›, í›„ëŒ€ì—ê²Œ ë¬¼ë ¤ì¤„ ì†Œì¤‘í•œ ìœ ì‚°ì…ë‹ˆë‹¤",
            "âœ¨ ê¹¨ë—í•œ ê¹€í¬, ë§‘ì€ ì—ë„ˆì§€! ìš°ë¦¬ê°€ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤"
        ]
    };

    function toggleBubble(element, color) {
        Sound.click();
        var isActive = element.classList.contains('active');
        document.querySelectorAll('.process-step.active').forEach(step => {
            step.classList.remove('active');
        });
        if (!isActive) {
            element.classList.add('active');
            var bubble = element.querySelector('.speech-bubble');
            if(bubble) {
                bubble.style.borderColor = color;
            }
            setTimeout(() => {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 50);
        }
    }

    const Sound = {
        ctx: null, bgmInterval: null, isSoundOn: false,
        init: function() {
            if(!this.ctx) { this.ctx = new (window.AudioContext || window.webkitAudioContext)(); }
            if(this.ctx.state === 'suspended') { this.ctx.resume(); }
        },
        playTone: function(freq, type, duration, vol) {
            this.init(); 
            if(!this.ctx || this.ctx.state !== 'running' || !this.isSoundOn) return; 
            let osc = this.ctx.createOscillator(); 
            let gain = this.ctx.createGain();
            osc.type = type; 
            osc.frequency.setValueAtTime(freq, this.ctx.currentTime);
            gain.gain.setValueAtTime(vol, this.ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + duration);
            osc.connect(gain); gain.connect(this.ctx.destination);
            osc.start(); osc.stop(this.ctx.currentTime + duration);
        },
        playNoise: function(duration, vol) {
            this.init();
            if(!this.ctx || this.ctx.state !== 'running' || !this.isSoundOn) return; 
            let bufferSize = this.ctx.sampleRate * duration;
            let buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate);
            let data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
            let noise = this.ctx.createBufferSource(); noise.buffer = buffer;
            let gain = this.ctx.createGain();
            gain.gain.setValueAtTime(vol, this.ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + duration);
            noise.connect(gain); gain.connect(this.ctx.destination); noise.start();
        },
        shoot: function() { this.playTone(800, 'square', 0.1, 0.08); },
        explosion: function() { this.playNoise(0.3, 0.3); },
        score: function() { this.playTone(600, 'sine', 0.1, 0.2); setTimeout(()=>this.playTone(800, 'sine', 0.15, 0.2), 100); },
        error: function() { this.playTone(150, 'sawtooth', 0.4, 0.3); },
        click: function() { this.playTone(500, 'sine', 0.05, 0.2); },
        levelUp: function() { [440, 554, 659, 880].forEach((f, i) => setTimeout(() => this.playTone(f, 'square', 0.2, 0.2), i * 120)); },
        toggleBGM: function() {
            this.init();
            this.isSoundOn = !this.isSoundOn;
            let btn = document.getElementById('bgm-toggle');
            if(btn) btn.innerText = this.isSoundOn ? "ğŸ”Š ì‚¬ìš´ë“œ: ON" : "ğŸ”‡ ì‚¬ìš´ë“œ: OFF";
            if(this.isSoundOn) {
                const melody = [261.6, 329.6, 392.0, 523.3, 392.0, 329.6, 349.2, 440.0, 523.3, 698.5, 523.3, 440.0, 392.0, 493.9, 587.3, 784.0, 587.3, 493.9]; 
                let idx = 0;
                if(this.bgmInterval) clearInterval(this.bgmInterval);
                this.bgmInterval = setInterval(() => {
                    if(this.ctx && this.ctx.state === 'running' && this.isSoundOn) {
                        let osc = this.ctx.createOscillator(); let gain = this.ctx.createGain();
                        osc.type = 'square'; osc.frequency.setValueAtTime(melody[idx], this.ctx.currentTime);
                        gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
                        gain.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.15);
                        osc.connect(gain); gain.connect(this.ctx.destination);
                        osc.start(); osc.stop(this.ctx.currentTime + 0.15);
                    }
                    idx = (idx + 1) % melody.length;
                }, 200); 
            } else { clearInterval(this.bgmInterval); }
        }
    };

    let audioUnlocked = false;
    function unlockAudio() {
        if (audioUnlocked) return;
        Sound.init();
        if(Sound.ctx) {
            Sound.ctx.resume().then(() => {
                let buffer = Sound.ctx.createBuffer(1, 1, 22050);
                let source = Sound.ctx.createBufferSource();
                source.buffer = buffer;
                source.connect(Sound.ctx.destination);
                source.start(0);
                audioUnlocked = true;
                if (!Sound.isSoundOn) { Sound.toggleBGM(); }
            });
        }
    }
    document.body.addEventListener('touchstart', unlockAudio, {once:true});
    document.body.addEventListener('click', unlockAudio, {once:true});

    if ('serviceWorker' in navigator) { window.addEventListener('load', () => { navigator.serviceWorker.register('./service-worker.js').catch(err => console.log(err)); }); }
    function safeGetItem(key) { try { return localStorage.getItem(key); } catch(e) { return "0"; } }
    function safeSetItem(key, val) { try { localStorage.setItem(key, val); } catch(e) {} }
    function safeClear() { try { localStorage.clear(); } catch(e) {} }

    function createBackgroundShapes() {
        const container = document.getElementById('background-shapes');
        const icons = ['ğŸŒ±', 'ğŸ’§', 'â™»ï¸', 'â˜ï¸', 'ğŸ‚', 'âœ¨', 'ğŸ­'];
        for(let i=0; i<20; i++) {
            let el = document.createElement('div'); el.classList.add('bg-icon');
            el.innerText = icons[Math.floor(Math.random() * icons.length)];
            el.style.left = Math.random() * 100 + '%';
            el.style.animationDuration = (Math.random() * 8 + 12) + 's'; 
            el.style.animationDelay = (Math.random() * 10) + 's';
            el.style.fontSize = (Math.random() * 30 + 40) + 'px';
            container.appendChild(el);
        }
    }
    createBackgroundShapes();

    var logoCanvas = document.getElementById('logoCanvas'); var logoCtx = logoCanvas.getContext('2d');
    var logoSmoke = []; var logoFrame = 0; var logoAnimId;

    window.onload = function() { 
        document.getElementById('notice-content').innerHTML = CONFIG.noticeText;
        document.getElementById('promo-content').innerHTML = CONFIG.promoText;
        resize(); window.addEventListener('resize', resize); updateMainCounter(); startMenuLogo(); 
    };

    function startMenuLogo() { if(logoAnimId) cancelAnimationFrame(logoAnimId); logoSmoke = []; animLoopLogo(); }
    function animLoopLogo() { logoFrame++; drawMenuLogo(); logoAnimId = requestAnimationFrame(animLoopLogo); }
    function drawMenuLogo() {
        logoCtx.clearRect(0,0, 200, 160); var cx = 100; var cy = 100;
        logoCtx.save(); logoCtx.shadowBlur = 10; logoCtx.shadowColor = 'rgba(0,0,0,0.2)';
        logoCtx.fillStyle = '#f1f2f6'; logoCtx.fillRect(cx - 60, cy, 80, 50); logoCtx.fillRect(cx - 20, cy - 20, 70, 70);
        logoCtx.strokeStyle = '#ced6e0'; logoCtx.lineWidth=3; logoCtx.strokeRect(cx-60, cy, 80, 50); logoCtx.strokeRect(cx-20, cy-20, 70, 70);
        logoCtx.fillStyle = '#70a1ff'; logoCtx.fillRect(cx - 50, cy + 10, 15, 15); logoCtx.fillRect(cx - 30, cy + 10, 15, 15); logoCtx.fillRect(cx - 10, cy - 10, 50, 10); logoCtx.fillRect(cx - 10, cy + 10, 50, 30); 
        logoCtx.fillStyle = '#a4b0be'; logoCtx.fillRect(cx + 30, cy - 70, 15, 60); 
        logoCtx.fillStyle = '#ff6b81'; logoCtx.fillRect(cx + 30, cy - 65, 15, 6);
        logoCtx.fillStyle = '#2ed573'; logoCtx.beginPath(); logoCtx.ellipse(cx + 5, cy + 25, 10, 18, Math.PI/4, 0, Math.PI*2); logoCtx.fill();
        logoCtx.restore();
        if(logoFrame % 10 === 0) logoSmoke.push({x: cx + 37, y: cy - 75, r: 5, alpha: 0.8});
        for(var i=0; i<logoSmoke.length; i++) {
            var s = logoSmoke[i]; s.y -= 1.2; s.x += Math.sin(logoFrame*0.05 + i) * 0.5; s.r += 0.15; s.alpha -= 0.015;
            logoCtx.fillStyle = 'rgba(255, 255, 255, ' + s.alpha + ')'; logoCtx.beginPath(); logoCtx.arc(s.x, s.y, s.r, 0, Math.PI*2); logoCtx.fill();
            if(s.alpha <= 0) { logoSmoke.splice(i, 1); i--; }
        }
    }

    function increaseUserCount() { var count = parseInt(safeGetItem('gimpoPlayCount') || "0"); count++; safeSetItem('gimpoPlayCount', count); updateMainCounter(); }
    function updateMainCounter() { var count = parseInt(safeGetItem('gimpoPlayCount') || "0"); var el = document.getElementById('mainUserCount'); if(el) el.innerText = count; }
    
    function forceQuitGame() {
        Sound.click();
        if (confirm("ê²Œì„ì„ ì¤‘ë‹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì§€ê¸ˆê¹Œì§€ì˜ ê¸°ë¡ì´ ëª…ì˜ˆì˜ ì „ë‹¹ì— ì €ì¥ë©ë‹ˆë‹¤.")) {
            gameRunning = false; saveScore(score); showRanking(); showRandomEcoQuote();
            uiLayer.style.display = 'flex'; gameTitle.innerText = "ğŸ›‘ ë¯¸ì…˜ ì¤‘ë‹¨"; rankArea.style.display = 'flex'; startBtnArea.style.display = 'none'; gameoverBtnArea.style.display = 'block'; 
        }
    }

    function goPage(pageName) {
        document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
        if(logoAnimId && pageName !== 'main') cancelAnimationFrame(logoAnimId);
        if (pageName === 'game-select') document.getElementById('game-select-page').style.display = 'flex';
        else if (pageName === 'game-play') document.getElementById('game-play-page').style.display = 'block';
        else if (pageName === 'notice') { document.getElementById('notice-page').style.display = 'flex'; increaseUserCount(); }
        else if (pageName === 'promo') { document.getElementById('promo-page').style.display = 'flex'; increaseUserCount(); }
        else if (pageName === 'process') { document.getElementById('process-page').style.display = 'flex'; }
        else if (pageName === 'feed-process') { document.getElementById('feed-process-page').style.display = 'flex'; }
        else { document.getElementById('main-menu').style.display = 'flex'; updateMainCounter(); startMenuLogo(); }
    }
    function goHome() { gameRunning = false; goPage('main'); }
    function resetData() { var pwd = prompt("ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸:"); if (pwd === "9730") { safeClear(); alert("ì™„ë£Œ"); location.reload(); } }

